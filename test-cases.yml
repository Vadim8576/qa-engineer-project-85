---
- summary: |
    Проверка успешной регистрации нового пользователя
  requirement: |
    При успешной регистрации пользователь должен войти в систему
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Нет
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Вводим подтверждение пароля
  expected-result: |
    Пользователь должен попасть на главную страницу

- summary: |
    Проверка повторной регистрации пользователя с существующими nickname и email
  requirement: |
    При верном вводе существующего nicknameа и email выводится сообщение, что nickname и email уже используются
  prerequisites: |
    Пользователь уже зарегистрирован на сайте. Открыта страница регистрации
  test-data: |
    nickname1 = cbtester, nickname2 = newcbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Вводим nickname1
    - Вводим email
    - Вводим password
    - Вводим подтверждение пароля
    - Нажимаем кнопку "Submit"
    - Если появилось сообщение, что nickname уже существует, вводим nickname2 (несуществующий)
    - Нажимаем кнопку "Submit"
  expected-result: |
    nickname1 - сообщение "nickname существует", nickname2 - "email существует"

- summary: |
    Проверка входа пользователя с существующими логином и паролем
  requirement: |
    При верном вводе логине и пароля пользователь должен войти в систему
  prerequisites: |
    Открыта страница логина
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Нажимаем кнопку "Submit"
  expected-result: |
    Успешный вход. Доступ к профилю

- summary: |
    Проверка входа пользователя с несуществующими email и паролем
  requirement: |
    При неправильном email или пароле пользователь должен получить сообщение об ошибке
  prerequisites: Открыта страница логина
  test-data: |
    email1 = abc@abc.ru, email2 = cbtester@codebattle.ru, password = badpass
  steps:
    - Вводим email1
    - Вводим password
    - Нажимаем кнопку "Submit"
    - Если появилось сообщение "Неверный email", вводим email2
    - Нажимаем кнопку "Submit"
  expected-result: |
    email1 - "Неверный email", email2 - "Неверный password"

- summary: |
    Проверка выхода из профиля
  requirement: |
    При выходе пользователь должен разлогиниться (выйти из системы), нет доступа к профилю
  prerequisites: |
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Вызвать меню
    - Нажать "Выйти"
  expected-result: |
    Произошел выход из системы, нет доступа к профилю

- summary: |
    Проверка возможности удалить свой профиль
  requirement: |
    Пользователь должен иметь возможность удалить свой профиль (аккаунт)
  prerequisites: |
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Вызвать меню
    - Нажать "Настройки"
    - Нажать "Удалить профиль"
  expected-result: |
    Профиль успешно удален

- summary: |
    Проверка создания игры только авторизованным пользователям
  requirement: |
    Создать бой с другими пользователями или ботом можно только будучи авторизованным
  prerequisites: |
    Не входить в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Нажать "Создать бой"
    - Настроить параметры
    - Нажать "Создать бой"
    - Войти в свой профиль
    - Повторить шаги 1-3
  expected-result: |
    Если нет авторизации, нет кнопки "Создать бой". При авторизации появляется кнопка

- summary: |
    Проверка возможности выбрать язык программирования в процессе игры
  requirement: |
    Язык программирования можно выбрать в процессе игры и не привязан к сессии
  prerequisites: |
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Создать бой
    - Выбрать любой язык программирования из выпадающего списка
  expected-result: |
    В окне редактора кода изменился язык программирования

- summary: |
    Проверка режима ожидания второго игрока при создании боя
  requirement: |
    После создания боя вход в режим ожидания, бой отобразится в списке доступных
  prerequisites: |
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Создать бой
    - Нажать "Continue battle"
    - Назад
    - Нажать "Join battle"
  expected-result: |
    При "Continue battle" переход на страницу ожидания с сылкой-приглашением, "Join battle" - бой отображается в списке, есть возможность продолжить

- summary: |
    Проверка успешного подключения к игре
  requirement: |
    При подключении к игре оба игрока должны перенестись в игровое пространство
  prerequisites: |
    Оба игрока находятся в системе (войти в разных браузерах в два профиля)
  test-data: |
    нет
  steps:
    - Создать бой в первом профиле
    - Присоединиться к бою в другом профиле
  expected-result: |
    Оба игрока перенеслись в игровое пространство

- summary: |
    Проверка наличия двух редакторов кода в игре
  requirement: |
    Во время игры (боя) должны отображаться два редактора кода, свой и соперника
  prerequisites: |
    Находиться в игре
  test-data: |
    нет
  steps:
    - Проверить наличие двух редакторов кода, слева свой, справа соперника
  expected-result: |
    В игре присутсвуют два редактора кода

- summary: |
    Проверка расположения задания, времени игры, чата
  requirement: |
    Во время игры задание должно распологаться сверху, время игры под ним, чат слева
  prerequisites: |
    Находиться в игре
  test-data: |
    нет
  steps:
    - Проверить расположение
  expected-result: |
    Задание распологается сверху, время игры под ним, чат слева

- summary: |
    Проверка возможности просмотра набора кода соперником в реальном времени
  requirement: |
    Во время боя виден редактор кода соперника, набор кода должен отображаться в реальном времени
  prerequisites: |
    Оба игрока находятся в одном бою
  test-data: |
    нет
  steps:
    - Войти в игровое пространство (бой с ботом или другим игроком)
    - Проверить отображение набора кода соперником
  expected-result: |
    Код, набираемый соперником отображается в реальном времени

- summary: |
    Проверка возможности запустить проверку неограниченное количество раз
  requirement: |
    Во время игры можно запускать проверку кода неограниченно
  prerequisites: |
    Создать игру или присоединиться к существующей
  test-data: |
    нет
  steps:
    - Запустить проверку кода несколько раз
    - Убедиться, что нет ограничений, например, в виде счетчика попыток, запуск не блокируется
  expected-result: |
    Нет ограничений запуска проверок, кнопка запуска не блокируется

- summary: |
    Проверка отсутствия возможности запуска тестов на коде соперника
  requirement: |
    Нельзя запустить проверку кода соперника
  prerequisites: |
    Создать игру или присоединиться к существующей
  test-data: |
    нет
  steps:
    - Проверить наличие кнопки запуска проверки кода в игровом пространстве противника
  expected-result: |
    Возможность запуска тестов на коде соперника отсутствует (нет кнопки)

- summary: |
    Проверка отображения окна "Победитель определён" при победе
  requirement: |
    Есть оповещение о победе
  prerequisites: |
    Создать игру или присоединиться к существующей
  test-data: |
    нет
  steps:
    - Написать код, соответствующий заданию
    - Запустить проверку, опередив соперника
  expected-result: |
    Отобразится окно, сообщающее о победе

- summary: |
    Проверка возможностей при победе
  requirement: |
    При победе кнопка запуска тестов блокируется. Появляется кнопка выхода. Победитель может остаться и смотреть на код
  prerequisites: |
    Создать игру или присоединиться к существующей
  test-data: |
    нет
  steps:
    - Победить в бою
  expected-result: |
    Кнопка запуска тестов заблокирована, появилась кнопка выхода. Можно остаться и смотреть на код

- summary: |
    Проверка возможности продолжать писать код и проверять при поражении или выйти
  requirement: |
    После поражения можно писать код и запускать проверки или выйти в лобби
  prerequisites: |
    Создать игру или присоединиться к существующей
  test-data: |
    нет
  steps:
    - Проиграть в бою (дождаться сообщения о проигрыше)
    - Продолжить писать код
    - Запустить проверку
    - Выйти
  expected-result: |
    Произойдет выход в лобби

- summary: |
    Проверка на отсутствие ограничения игры по времени
  requirement: |
    Игра может длиться неограниченно. Нет таймера на победу - игра идет до первого успешного решения
  prerequisites: |
    Оба игрока находятся в системе (войти в разных браузерах в два профиля)
  test-data: |
    нет
  steps:
    - Проверить отсутствие таймера обратного отсчета
    - Написать решение задания на одном из профилей
    - Убедиться, что игра завершилась
  expected-result: |
    Нет обратного отсчета времени, игра не ограничена по времени. При победе одного игрока, игра завершается

- summary: |
    Проверка SPA поведения при навигации по сайту
  requirement: |
    Страницы должны обновляться без полной перезагрузки
  prerequisites: Пользователь находится на главной странице, не авторизован
  test-data: |
    https://codebattle.hexlet.io/
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Кликнуть по кнопке "Sign Up"
    - Кликнуть по кнопке "Sign In"
    - Авторизоваться
    - В меню профиля нажать последовательно "My Profile", "Setting", "Hall of Fame"... (пройтись по всем пунктам меню)
    - Перейти на оставшиеся страницы
  expected-result: |
    Страницы должны обновляться без полной перезагрузки. Должен произойти только рендеринг компонентов

- summary: |
    Проверка формы регистрации и входа на наличие понятных подсказок при ошибках ввода
  requirement: |
    При ошибках ввоа формы регистрации и входа должны отображать понятные подсказки, данные должны сохраняться
  prerequisites: |
    Пользователь находится на странице регистрации
  test-data: |
    email1 = "Incorrect_email"
    nickname = cbtester, email2 = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Нажать "Submit" на пустой форме
    - Ввести в форму регистрации email1
    - Ввести в форму регистрации данные уже зарегистрированного пользователя (nickname, email2, password)
  expected-result: |
    Формы регистрации и входа отображают понятные подсказки (например, "поле должно быть заполена" или "пользователь с таким никнеймом уже существует"), сохраняют данные при ошибках ввода

- summary: |
    Проверка наличия раздела "Помощь" или "FAQ"
  requirement: |
    Для удобства пользования сайт должен содержать раздел "Помощь" или "FAQ"
  prerequisites: |
    Пользователь находится на главной странице
  test-data: |
    https://codebattle.hexlet.io/
    nickname = cbtester, email2 = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Проверить наличие раздела "Помощь" или "FAQ"
    - Авторизоваться
    - Вызвать основное меню
    - Повторить первый шаг
  expected-result: |
    На сайте есть "Помощь" или "FAQ"

- summary: |
    Проверка страниц сайта и интерфейс на читаемость
  requirement: |
    Сайт должен содержать читаемый контент и интерфейс (текст контрастный по отношению к фону, шрифт не слишком мелкий)
  prerequisites: |
    Пользователь находится на главной странице, не авторизован
  test-data: |
    https://codebattle.hexlet.io/
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Прочитать текст на главной странице
    - Авторизоваться (проверить читаемость текста форм)
    - Пройтись по страницам сайта, проверить читаемость текста, отображение интерфейса, выпадающих меню
  expected-result: |
    На всех страницах текст и интерфейс читаемые, не мелкие, контрастные

- summary: |
    Проверка оптимизации лишних перерисовок компонентов сайта
  requirement: |
    Сайт должен быть оптимизирован для скорости работы, нет лишних рендеров компонентов
  prerequisites: |
    Авторизованный пользователь находится на главной странице,
    установлено дополнение React devtools,
    выбрано "Highlight updates when components render" в настройках
  test-data: |
    https://codebattle.hexlet.io/
    nickname = cbtester, email = cbtester@codebattle.ru, password = !Abcde_2026
  steps:
    - Понаблюдать за визуализацией перерисовки компонентов
    - Перейти на другие страницы сайта
    - Повторить первый шаг
  expected-result: |
    На статичных элемента страницы нет визауализации перерисовки (нет лишних рендеров)

- summary: |
    Проверка безопасности соединения и данных
  requirement: |
    Соединение должно быть защищено, данные пользователя должны передаваться по защищенному протоколу
  prerequisites: |
    Пользователь находится на главной странице
  test-data: |
    Нет
  steps:
    - Проверить URL в адресной строке
  expected-result: |
    Соединение должно быть защищено (отображается значок замка), на сайте используется HTTPS

