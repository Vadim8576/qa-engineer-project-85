---
- summary: |
    Проверка успешной регистрации нового пользователя
  requirement: |
    При успешной регистрации пользователь должен войти в систему
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Нет
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим пароль
    - Вводим подтверждение пароля
  expected-result: |
    Пользователь должен попасть на главную страницу

- summary: |
    Проверка повторной регистрации пользователя с существующими nickname и email
  requirement: |
    При верном вводе существующего nicknameа и email выводится сообщение, что nickname и email уже используются
  prerequisites: |
    Пользователь уже зарегистрирован на сайте. Открыта страница регистрации
  test-data: |
    nickname1 = cbtester, nickname2 = newcbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Вводим nickname1
    - Вводим email
    - Вводим пароль
    - Вводим подтверждение пароля
    - Нажимаем кнопку "Submit"
    - Если появилось сообщение, что nickname уже существует, вводим nickname2 (несуществующий)
    - Нажимаем кнопку "Submit"
  expected-result: |
    nickname1 - сообщение "nickname существует", nickname2 - "email существует"

- summary: |
    Проверка входа пользователя с существующими логином и паролем
  requirement: |
    При верном вводе логине и пароля пользователь должен войти в систему
  prerequisites: |  
    Открыта страница логина
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим пароль
    - Нажимаем кнопку "Submit"
  expected-result: |
    Успешный вход. Доступ к профилю

- summary: |
    Проверка входа пользователя с несуществующими email и паролем
  requirement: |
    При неправильном email или пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница логина
  test-data: |
    email1 = abc@abc.ru, email2 = cbtester@codebattle.ru, Пароль = badpass
  steps:
    - Вводим email1
    - Вводим пароль
    - Нажимаем кнопку "Submit"
    - Если появилось сообщение "Неверный email", вводим email2
    - Нажимаем кнопку "Submit"
  expected-result: |
    email1 - "Неверный email", email2 - "Неверный пароль"

- summary: |
    Проверка выхода из профиля
  requirement: |
    При выходе пользователь должен разлогиниться (выйти из системы), нет доступа к профилю
  prerequisites: |  
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Вызвать меню
    - Нажать "Выйти"
  expected-result: |
    Произошел выход из системы, нет доступа к профилю

- summary: |
    Проверка возможности удалить свой профиль
  requirement: |
    Пользователь должен иметь возможность удалить свой профиль (аккаунт)
  prerequisites: |  
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Вызвать меню
    - Нажать "Настройки"
    - Нажать "Удалить профиль"
  expected-result: |
    Профиль успешно удален

- summary: |
    Проверка создания игры только авторизованным пользователям
  requirement: |
    Создать бой с другими пользователями или ботом можно только будучи авторизованным
  prerequisites: |  
    Не входить в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Нажать "Создать бой"
    - Настроить параметры
    - Нажать "Создать бой"
    - Войти в свой профиль
    - Повторить шаги 1-3
  expected-result: |
    Если нет авторизации, нет кнопки "Создать бой". При авторизации появляется кнопка

- summary: |
    Проверка возможности выбрать язык программирования в процессе игры
  requirement: |
    Язык программирования можно выбрать в процессе игры и не привязан к сессии
  prerequisites: |  
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Создать бой
    - Выбрать любой язык программирования из выпадающего списка
  expected-result: |
    В окне редактора кода изменился язык программирования

- summary: |
    Проверка режима ожидания второго игрока при создании боя
  requirement: |
    После создания боя вход в режим ожидания, бой отобразится в списке доступных
  prerequisites: |  
    Осуществлен вход в профиль
  test-data: |
    nickname = cbtester, email = cbtester@codebattle.ru, пароль = !Abcde_2026
  steps:
    - Создать бой
    - Нажать "Continue battle"
    - Назад
    - Нажать "Join battle"
  expected-result: |
    При "Continue battle" переход на страницу ожидания с сылкой-приглашением, "Join battle" - бой отображается в списке, есть возможность продолжить

- summary: |
    Проверка успешного подключения к игре
  requirement: |
    При подключении к игре оба игрока должны перенестись в игровое пространство
  prerequisites: |  
    Оба игрока находятся в системе (войти в разных браузерах в два профиля)
  test-data: |
    нет
  steps:
    - Создать бой в первом профиле
    - Присоединиться к бою в другом профиле
  expected-result: |
    Оба игрока перенеслись в игровое пространство

- summary: |
    Проверка возможности просмотра набора кода соперником в реальном времени
  requirement: |
    Во время боя виден редактор кода соперника, набор кода должен отображаться в реальном времени
  prerequisites: |  
    Оба игрока находятся в одном бою
  test-data: |
    нет
  steps:
    - Войти в игровое пространство (бой с ботом или другим игроком)
    - Проверить отображение набора кода соперником
  expected-result: |
    Код, набираемый соперником отображается в реальном времени